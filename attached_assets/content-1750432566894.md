````
# Using trial periods on subscriptions

Delay payments on active subscriptions using trial periods.

You can start a customer’s *subscription* with a free trial period by providing a `trial_end` argument when [creating the subscription](https://docs.stripe.com/api.md#create_subscription):

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new SubscriptionCreateOptions
{
    Customer = "<<customer>>",
    Items = new List<SubscriptionItemOptions>
    {
        new SubscriptionItemOptions { Price = "<<price>>" },
    },
    TrialEnd = DateTimeOffset.FromUnixTimeSeconds(1610403705).UtcDateTime,
};
var service = new SubscriptionService();
Subscription subscription = service.Create(options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.SubscriptionParams{
  Customer: stripe.String("<<customer>>"),
  Items: []*stripe.SubscriptionItemsParams{
    &stripe.SubscriptionItemsParams{Price: stripe.String("<<price>>")},
  },
  TrialEnd: stripe.Int64(1610403705),
};
result, err := subscription.New(params);
```

```java
Stripe.apiKey = "<<secret key>>";

SubscriptionCreateParams params =
  SubscriptionCreateParams.builder()
    .setCustomer("<<customer>>")
    .addItem(SubscriptionCreateParams.Item.builder().setPrice("<<price>>").build())
    .setTrialEnd(1610403705L)
    .build();

Subscription subscription = Subscription.create(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const subscription = await stripe.subscriptions.create({
  customer: '<<customer>>',
  items: [\
    {\
      price: '<<price>>',\
    },\
  ],
  trial_end: 1610403705,
});
```

```python
import stripe
stripe.api_key = "<<secret key>>"

subscription = stripe.Subscription.create(
  customer="<<customer>>",
  items=[{"price": "<<price>>"}],
  trial_end=1610403705,
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$subscription = $stripe->subscriptions->create([\
  'customer' => '<<customer>>',\
  'items' => [['price' => '<<price>>']],\
  'trial_end' => 1610403705,\
]);
```

```ruby
Stripe.api_key = '<<secret key>>'

subscription = Stripe::Subscription.create({
  customer: '<<customer>>',
  items: [{price: '<<price>>'}],
  trial_end: 1610403705,
})
```

The `trial_end` parameter takes a timestamp indicating the exact moment the trial ends. When creating a subscription, you can alternatively use the [trial_period_days](https://docs.stripe.com/api.md#create_subscription-trial_period_days) parameter: an integer representing the number of days the trial lasts, from the current moment. The trial period must be 730 days (2 years) or less.

When creating a subscription with a trial period, you don’t need to add a payment method. An immediate *invoice* is still created, but the amount is 0 and the [Invoice Line descriptions](https://docs.stripe.com/api/invoices/object.md#invoice_object-lines-data-description) include “Free trial” verbiage.

Trial periods are normally applied at the start of a subscription, but you can also use a trial period on an existing subscription to [change the subscription’s billing cycle](https://docs.stripe.com/billing/subscriptions/billing-cycle.md).

When the trial ends, if the subscription `status` isn’t `paused`, we generate an invoice and send an `invoice.created` event notification. Approximately 1 hour later, we attempt to charge that invoice. A new billing cycle also begins for the customer when the trial ends.

To end a trial early, make an [update subscription](https://docs.stripe.com/api.md#update_subscription) API call, setting the `trial_end` value to a new timestamp, or **now** to end immediately:

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new SubscriptionUpdateOptions { TrialEnd = SubscriptionTrialEnd.Now };
var service = new SubscriptionService();
Subscription subscription = service.Update("<<subscription>>", options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.SubscriptionParams{TrialEndNow: true};
result, err := subscription.Update("<<subscription>>", params);
```

```java
Stripe.apiKey = "<<secret key>>";

Subscription resource = Subscription.retrieve("<<subscription>>");

SubscriptionUpdateParams params =
  SubscriptionUpdateParams.builder().setTrialEnd(SubscriptionUpdateParams.TrialEnd.NOW).build();

Subscription subscription = resource.update(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const subscription = await stripe.subscriptions.update(
  '<<subscription>>',
  {
    trial_end: 'now',
  }
);
```

```python
import stripe
stripe.api_key = "<<secret key>>"

subscription = stripe.Subscription.modify(
  "<<subscription>>",
  trial_end="now",
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$subscription = $stripe->subscriptions->update('<<subscription>>', ['trial_end' => 'now']);
```

```ruby
Stripe.api_key = '<<secret key>>'

subscription = Stripe::Subscription.update('<<subscription>>', {trial_end: 'now'})
```

## Combining trials with billing cycle anchor

As of API version [2018-02-05](https://docs.stripe.com/upgrades.md#2018-02-05), you can also combine trials with `billing_cycle_anchor`, resulting in a free period followed by a prorated period, leading into a fixed billing cycle.

For example, suppose it’s the 15th of the month and you want to give your customer a free 7 day trial (until the 22nd), and then start normal billing on the 1st. You can do this through the API by combining trials with `billing_cycle_anchor`. (This isn’t currently available through the [Dashboard](https://dashboard.stripe.com/test/subscriptions).)

In this example, the customer gets an invoice for a _prorated_ amount on the 22nd (for the period until the 1st).
Then, on the 1st, they’ll be invoiced again for the full amount, and again on the 1st of the following month, and so on.

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new SubscriptionCreateOptions
{
    Customer = "<<customer>>",
    Items = new List<SubscriptionItemOptions>
    {
        new SubscriptionItemOptions { Price = "<<price>>" },
    },
    TrialEnd = DateTimeOffset.FromUnixTimeSeconds(1610403705).UtcDateTime,
    BillingCycleAnchor = DateTimeOffset.FromUnixTimeSeconds(1611008505).UtcDateTime,
};
var service = new SubscriptionService();
Subscription subscription = service.Create(options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.SubscriptionParams{
  Customer: stripe.String("<<customer>>"),
  Items: []*stripe.SubscriptionItemsParams{
    &stripe.SubscriptionItemsParams{Price: stripe.String("<<price>>")},
  },
  TrialEnd: stripe.Int64(1610403705),
  BillingCycleAnchor: stripe.Int64(1611008505),
};
result, err := subscription.New(params);
```

```java
Stripe.apiKey = "<<secret key>>";

SubscriptionCreateParams params =
  SubscriptionCreateParams.builder()
    .setCustomer("<<customer>>")
    .addItem(SubscriptionCreateParams.Item.builder().setPrice("<<price>>").build())
    .setTrialEnd(1610403705L)
    .setBillingCycleAnchor(1611008505L)
    .build();

Subscription subscription = Subscription.create(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const subscription = await stripe.subscriptions.create({
  customer: '<<customer>>',
  items: [\
    {\
      price: '<<price>>',\
    },\
  ],
  trial_end: 1610403705,
  billing_cycle_anchor: 1611008505,
});
```

```python
import stripe
stripe.api_key = "<<secret key>>"

subscription = stripe.Subscription.create(
  customer="<<customer>>",
  items=[{"price": "<<price>>"}],
  trial_end=1610403705,
  billing_cycle_anchor=1611008505,
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$subscription = $stripe->subscriptions->create([\
  'customer' => '<<customer>>',\
  'items' => [['price' => '<<price>>']],\
  'trial_end' => 1610403705,\
  'billing_cycle_anchor' => 1611008505,\
]);
```

```ruby
Stripe.api_key = '<<secret key>>'

subscription = Stripe::Subscription.create({
  customer: '<<customer>>',
  items: [{price: '<<price>>'}],
  trial_end: 1610403705,
  billing_cycle_anchor: 1611008505,
})
```

### Metered billing with paused subscriptions

You can send [meter events](https://docs.stripe.com/api/billing/meter-event.md) associated with a price on a subscription even while it’s paused. However, after the subscription resumes, the invoice won’t include any meter events sent during the paused state. Future invoices only include meter events that occur after the resume date. If you use [legacy usage records](https://docs.stripe.com/billing/subscriptions/usage-based-legacy.md), you can’t create new usage records while a subscription is paused.

## Adding a new trial to a subscription previously in a trial

You can add a new trial on a non-trialing subscription by updating the subscription while specifying [`trial_end`](https://docs.stripe.com/api/subscriptions/update.md#update_subscription-trial_end) or updating its associated subscription schedule. You need to specify [`phases.trial_end`](https://docs.stripe.com/api/subscription_schedules/create.md#create_subscription_schedule-phases-trial_end) for subscriptions.

For most subscriptions that enter a new trial after a previous trial ends, the `trial_start` field remains set to the start of the first trial. As of [API version 2025-04-30](https://docs.stripe.com/changelog/basil.md#2025-04-30.preview), for subscriptions with [billing_mode](https://docs.stripe.com/api/subscription_schedules/create.md#create_subscription_schedule-billing_mode) set to `flexible`, `trial_start` reflects the beginning of the most recent trial.

## Combining trials with add_invoice_items

Trial periods for subscriptions can be combined with one time prices and `add_invoice_items`. This may happen if you want to charge a one time fee or add on at the same time as starting a trial. Note that doing this will cause an invoice to be cut immediately for the amount of the one time item at the beginning of the trial.

## Compliance requirements for trials and promotions

You must comply with card network [requirements](https://support.stripe.com/questions/2020-visa-trial-subscription-requirement-changes-guide) when offering trials, whether they’re free or not. This includes scenarios like free trials or charging customers a reduced price for the first few months and then automatically charging them your normal rate. When using our trials features, you can enable [messaging settings](https://dashboard.stripe.com/settings/billing/automatic) in the Stripe Dashboard to help you meet the requirements.

If you notify users of [successful payments](https://dashboard.stripe.com/settings/emails), Stripe automatically displays information about the trial and the cancellation URL in those notifications.

If you don’t use these settings, you’re still responsible for complying with the requirements.

When customer emails are enabled, a reminder is sent seven days before a trial ends. If a trial is shorter than seven days, the reminder email is sent as soon as the trial begins. If trials are renewed, a reminder email is resent.

If both trial reminders and subscription renewal reminders are enabled during a trial, customers only receive the trial ending reminder. Renewal emails are then sent for subsequent billing periods.

The cancellation policy link is a URL that is displayed on customer receipts, along with other trial information. This information is included for all card payments. The cancellation URL is also included in the reminder email that is sent to customers seven days before their trial ends.

For statement descriptors, if you manually set the [statement descriptor](https://docs.stripe.com/api/invoices/object.md#invoice_object-statement_descriptor) on the invoice, the trial text isn’t appended so you need to add it. If you use [product statement descriptors](https://docs.stripe.com/api/products/object.md#product_object-statement_descriptor), the trial text is appended automatically. If your statement descriptor is greater than 10 characters, make sure it still makes sense to your customers with the trial text appended. There is a 22 character [limit](https://docs.stripe.com/get-started/account/statement-descriptors.md#requirements) so anything after the 10th character is overwritten with `* TRIAL OVER`.

If you don’t manually set the statement descriptor or use product statement descriptors, the trial text is appended to your account’s statement descriptor. If needed, you can set up a [shortened descriptor](https://dashboard.stripe.com/settings/public) to ensure the trial text displays correctly.

### Meeting requirements without using Stripe’s features

If you offer trials or promotions without using our trials features, you still need to comply with the [requirements](https://support.stripe.com/questions/2020-visa-trial-subscription-requirement-changes-guide). You can listen for the [invoice.upcoming](https://docs.stripe.com/api/events/types.md#event_types-invoice.upcoming) event to determine when to send email notifications. To add text to your statement descriptor that indicates the promotion is over:

- Listen for the `customer.subscription.updated` event
- Check to see if a trial or promotion has ended
- Update the [statement descriptor](https://docs.stripe.com/api/invoices/update.md#update_invoice-statement_descriptor) on the subscription’s `latest_invoice`

You need to update the latest invoice within an hour of its creation while it’s still in draft status.

## Create free trials without collecting payment method

While starting a free trial without a payment method lets your potential customers try your product or service faster, it can also allow spammers to create lots of fake customers, usage, and subscriptions. We recommend carefully considering the signup flow here to balance making it easy for real customers and difficult for spam bots to abuse (for example, requiring customers to create a user account and complete a captcha before starting their free trial subscription).

You can sign customers up for a free trial of a subscription without collecting their payment details in the Dashboard, the API, and Checkout. When you create the subscription, you can specify whether to cancel or pause the subscription if the customer didn’t provide a payment method during the trial period. To cancel or pause the subscription, set the `trial_settings.end_behavior.missing_payment_method` parameter when you create or update the subscription:

- **Cancel subscription**-If the free trial subscription ends without a payment method, it cancels immediately. You can create another subscription if the customer decides to subscribe to a paid plan in the future. Set `missing_payment_method=cancel` to cancel the subscription when it reaches the end of a trial without an available payment method.
- **Pause subscription**-If the free trial subscription ends without a payment method, it pauses and doesn’t cycle until it’s resumed. When a subscription is paused, it doesn’t generate invoices (unlike when a subscription’s [payment collection](https://docs.stripe.com/billing/subscriptions/pause-payment.md) is paused). When your customer adds their payment method after the subscription has paused, you can resume the same subscription. The subscription can remain paused indefinitely. Set `missing_payment_method=pause` to pause the subscription when it reaches the end of a trial without an available payment method.

Alternatively, set `missing_payment_method=create_invoice` to invoice at the end of the trial if no payment method is present. If a payment method isn’t provided when the invoice finalizes, the subscription moves into `past_due`.

Configure reminder emails to collect customer’s payment details in your [free trial messaging settings](https://dashboard.stripe.com/settings/billing/automatic).

### Configure free trials without payment methods to cancel

Use the Dashboard, the API, or Checkout to create free trials of a subscription without collecting payment details from your customers, and to configure your subscription to cancel if the trial ends without a payment method.

You can use the Dashboard to sign customers up for a free trial of a subscription without collecting their payment details:

1. From the Subscriptions settings of the Dashboard, select **+Create subscription**.
1. After adding your customer and product information, select **+Add free trial**, then input how many days the free trial lasts.
1. Select the **Pause or cancel if free trial ends without a payment method** option, then select **Cancel immediately**. If you’re using [test clocks](https://docs.stripe.com/billing/testing/test-clocks.md), advance to the end of the trial. You won’t see an upcoming invoice for the subscription.
1. Listen to the `customer.subscription.deleted` event that informs you when a subscription cancels at the end of trials without a payment method.

If you provide a payment method or select the **Email invoice to customer with link to payment page** option, the **Pause or cancel if free trial ends without a payment method** option won’t be visible.

Use the following API calls to sign up customers for a free trial of a subscription without collecting their payment details. If no payment method is provided at the end of the trial, the subscription cancels.

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new SubscriptionCreateOptions
{
    Customer = "<<customer>>",
    Items = new List<SubscriptionItemOptions>
    {
        new SubscriptionItemOptions { Price = "<<price>>" },
    },
    TrialPeriodDays = 30,
    PaymentSettings = new SubscriptionPaymentSettingsOptions
    {
        SaveDefaultPaymentMethod = "on_subscription",
    },
    TrialSettings = new SubscriptionTrialSettingsOptions
    {
        EndBehavior = new SubscriptionTrialSettingsEndBehaviorOptions
        {
            MissingPaymentMethod = "cancel",
        },
    },
};
var service = new SubscriptionService();
Subscription subscription = service.Create(options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.SubscriptionParams{
  Customer: stripe.String("<<customer>>"),
  Items: []*stripe.SubscriptionItemsParams{
    &stripe.SubscriptionItemsParams{Price: stripe.String("<<price>>")},
  },
  TrialPeriodDays: stripe.Int64(30),
  PaymentSettings: &stripe.SubscriptionPaymentSettingsParams{
    SaveDefaultPaymentMethod: stripe.String(string(stripe.SubscriptionPaymentSettingsSaveDefaultPaymentMethodOnSubscription)),
  },
  TrialSettings: &stripe.SubscriptionTrialSettingsParams{
    EndBehavior: &stripe.SubscriptionTrialSettingsEndBehaviorParams{
      MissingPaymentMethod: stripe.String(string(stripe.SubscriptionTrialSettingsEndBehaviorMissingPaymentMethodCancel)),
    },
  },
};
result, err := subscription.New(params);
```

```java
Stripe.apiKey = "<<secret key>>";

SubscriptionCreateParams params =
  SubscriptionCreateParams.builder()
    .setCustomer("<<customer>>")
    .addItem(SubscriptionCreateParams.Item.builder().setPrice("<<price>>").build())
    .setTrialPeriodDays(30L)
    .setPaymentSettings(
      SubscriptionCreateParams.PaymentSettings.builder()
        .setSaveDefaultPaymentMethod(
          SubscriptionCreateParams.PaymentSettings.SaveDefaultPaymentMethod.ON_SUBSCRIPTION
        )
        .build()
    )
    .setTrialSettings(
      SubscriptionCreateParams.TrialSettings.builder()
        .setEndBehavior(
          SubscriptionCreateParams.TrialSettings.EndBehavior.builder()
            .setMissingPaymentMethod(
              SubscriptionCreateParams.TrialSettings.EndBehavior.MissingPaymentMethod.CANCEL
            )
            .build()
        )
        .build()
    )
    .build();

Subscription subscription = Subscription.create(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const subscription = await stripe.subscriptions.create({
  customer: '<<customer>>',
  items: [\
    {\
      price: '<<price>>',\
    },\
  ],
  trial_period_days: 30,
  payment_settings: {
    save_default_payment_method: 'on_subscription',
  },
  trial_settings: {
    end_behavior: {
      missing_payment_method: 'cancel',
    },
  },
});
```

```python
import stripe
stripe.api_key = "<<secret key>>"

subscription = stripe.Subscription.create(
  customer="<<customer>>",
  items=[{"price": "<<price>>"}],
  trial_period_days=30,
  payment_settings={"save_default_payment_method": "on_subscription"},
  trial_settings={"end_behavior": {"missing_payment_method": "cancel"}},
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$subscription = $stripe->subscriptions->create([\
  'customer' => '<<customer>>',\
  'items' => [['price' => '<<price>>']],\
  'trial_period_days' => 30,\
  'payment_settings' => ['save_default_payment_method' => 'on_subscription'],\
  'trial_settings' => ['end_behavior' => ['missing_payment_method' => 'cancel']],\
]);
```

```ruby
Stripe.api_key = '<<secret key>>'

subscription = Stripe::Subscription.create({
  customer: '<<customer>>',
  items: [{price: '<<price>>'}],
  trial_period_days: 30,
  payment_settings: {save_default_payment_method: 'on_subscription'},
  trial_settings: {end_behavior: {missing_payment_method: 'cancel'}},
})
```

To update existing subscriptions, use the following API call:

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new SubscriptionUpdateOptions
{
    TrialSettings = new SubscriptionTrialSettingsOptions
    {
        EndBehavior = new SubscriptionTrialSettingsEndBehaviorOptions
        {
            MissingPaymentMethod = "cancel",
        },
    },
};
var service = new SubscriptionService();
Subscription subscription = service.Update("<<subscription>>", options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.SubscriptionParams{
  TrialSettings: &stripe.SubscriptionTrialSettingsParams{
    EndBehavior: &stripe.SubscriptionTrialSettingsEndBehaviorParams{
      MissingPaymentMethod: stripe.String(string(stripe.SubscriptionTrialSettingsEndBehaviorMissingPaymentMethodCancel)),
    },
  },
};
result, err := subscription.Update("<<subscription>>", params);
```

```java
Stripe.apiKey = "<<secret key>>";

Subscription resource = Subscription.retrieve("<<subscription>>");

SubscriptionUpdateParams params =
  SubscriptionUpdateParams.builder()
    .setTrialSettings(
      SubscriptionUpdateParams.TrialSettings.builder()
        .setEndBehavior(
          SubscriptionUpdateParams.TrialSettings.EndBehavior.builder()
            .setMissingPaymentMethod(
              SubscriptionUpdateParams.TrialSettings.EndBehavior.MissingPaymentMethod.CANCEL
            )
            .build()
        )
        .build()
    )
    .build();

Subscription subscription = resource.update(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const subscription = await stripe.subscriptions.update(
  '<<subscription>>',
  {
    trial_settings: {
      end_behavior: {
        missing_payment_method: 'cancel',
      },
    },
  }
);
```

```python
import stripe
stripe.api_key = "<<secret key>>"

subscription = stripe.Subscription.modify(
  "<<subscription>>",
  trial_settings={"end_behavior": {"missing_payment_method": "cancel"}},
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$subscription = $stripe->subscriptions->update(
  '<<subscription>>',
  ['trial_settings' => ['end_behavior' => ['missing_payment_method' => 'cancel']]]
);
```

```ruby
Stripe.api_key = '<<secret key>>'

subscription = Stripe::Subscription.update(
  '<<subscription>>',
  {trial_settings: {end_behavior: {missing_payment_method: 'cancel'}}},
)
```

You can use Stripe Checkout to sign customers up for a free trial of a subscription without collecting their payment details.

Create a Checkout Session with the following:

* A `subscription_data` dictionary with:
  * The `trial_period_days` field set to the length (in days) of your free trial. In this example, the trial period is 30 days.
  * The `trial_settings[end_behavior]` parameter set to `cancel` to make sure that the subscription cancels if the free trial ends without a payment method attached.
* The `payment_method_collection` field with a value of `if_required`. This tells Stripe that collecting payment information at checkout is optional.

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new Stripe.Checkout.SessionCreateOptions
{
    Mode = "subscription",
    LineItems = new List<Stripe.Checkout.SessionLineItemOptions>
    {
        new Stripe.Checkout.SessionLineItemOptions { Price = "price_abc", Quantity = 1 },
    },
    SubscriptionData = new Stripe.Checkout.SessionSubscriptionDataOptions
    {
        TrialSettings = new Stripe.Checkout.SessionSubscriptionDataTrialSettingsOptions
        {
            EndBehavior = new Stripe.Checkout.SessionSubscriptionDataTrialSettingsEndBehaviorOptions
            {
                MissingPaymentMethod = "cancel",
            },
        },
        TrialPeriodDays = 30,
    },
    PaymentMethodCollection = "if_required",
    SuccessUrl = "https://example.com/success",
    CancelUrl = "https://example.com/cancel",
};
var service = new Stripe.Checkout.SessionService();
Stripe.Checkout.Session session = service.Create(options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.CheckoutSessionParams{
  Mode: stripe.String(string(stripe.CheckoutSessionModeSubscription)),
  LineItems: []*stripe.CheckoutSessionLineItemParams{
    &stripe.CheckoutSessionLineItemParams{
      Price: stripe.String("price_abc"),
      Quantity: stripe.Int64(1),
    },
  },
  SubscriptionData: &stripe.CheckoutSessionSubscriptionDataParams{
    TrialSettings: &stripe.CheckoutSessionSubscriptionDataTrialSettingsParams{
      EndBehavior: &stripe.CheckoutSessionSubscriptionDataTrialSettingsEndBehaviorParams{
        MissingPaymentMethod: stripe.String("cancel"),
      },
    },
    TrialPeriodDays: stripe.Int64(30),
  },
  PaymentMethodCollection: stripe.String(string(stripe.CheckoutSessionPaymentMethodCollectionIfRequired)),
  SuccessURL: stripe.String("https://example.com/success"),
  CancelURL: stripe.String("https://example.com/cancel"),
};
result, err := session.New(params);
```

```java
Stripe.apiKey = "<<secret key>>";

SessionCreateParams params =
  SessionCreateParams.builder()
    .setMode(SessionCreateParams.Mode.SUBSCRIPTION)
    .addLineItem(
      SessionCreateParams.LineItem.builder().setPrice("price_abc").setQuantity(1L).build()
    )
    .setSubscriptionData(
      SessionCreateParams.SubscriptionData.builder()
        .setTrialSettings(
          SessionCreateParams.SubscriptionData.TrialSettings.builder()
            .setEndBehavior(
              SessionCreateParams.SubscriptionData.TrialSettings.EndBehavior.builder()
                .setMissingPaymentMethod(
                  SessionCreateParams.SubscriptionData.TrialSettings.EndBehavior.MissingPaymentMethod.CANCEL
                )
                .build()
            )
            .build()
        )
        .setTrialPeriodDays(30L)
        .build()
    )
    .setPaymentMethodCollection(SessionCreateParams.PaymentMethodCollection.IF_REQUIRED)
    .setSuccessUrl("https://example.com/success")
    .setCancelUrl("https://example.com/cancel")
    .build();

Session session = Session.create(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const session = await stripe.checkout.sessions.create({
  mode: 'subscription',
  line_items: [\
    {\
      price: 'price_abc',\
      quantity: 1,\
    },\
  ],
  subscription_data: {
    trial_settings: {
      end_behavior: {
        missing_payment_method: 'cancel',
      },
    },
    trial_period_days: 30,
  },
  payment_method_collection: 'if_required',
  success_url: 'https://example.com/success',
  cancel_url: 'https://example.com/cancel',
});
```

```python
import stripe
stripe.api_key = "<<secret key>>"

session = stripe.checkout.Session.create(
  mode="subscription",
  line_items=[{"price": "price_abc", "quantity": 1}],
  subscription_data={
    "trial_settings": {"end_behavior": {"missing_payment_method": "cancel"}},
    "trial_period_days": 30,
  },
  payment_method_collection="if_required",
  success_url="https://example.com/success",
  cancel_url="https://example.com/cancel",
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$session = $stripe->checkout->sessions->create([\
  'mode' => 'subscription',\
  'line_items' => [\
    [\
      'price' => 'price_abc',\
      'quantity' => 1,\
    ],\
  ],\
  'subscription_data' => [\
    'trial_settings' => ['end_behavior' => ['missing_payment_method' => 'cancel']],\
    'trial_period_days' => 30,\
  ],\
  'payment_method_collection' => 'if_required',\
  'success_url' => 'https://example.com/success',\
  'cancel_url' => 'https://example.com/cancel',\
]);
```

```ruby
Stripe.api_key = '<<secret key>>'

session = Stripe::Checkout::Session.create({
  mode: 'subscription',
  line_items: [\
    {\
      price: 'price_abc',\
      quantity: 1,\
    },\
  ],
  subscription_data: {
    trial_settings: {end_behavior: {missing_payment_method: 'cancel'}},
    trial_period_days: 30,
  },
  payment_method_collection: 'if_required',
  success_url: 'https://example.com/success',
  cancel_url: 'https://example.com/cancel',
})
```

If you set the `trial_settings.end_behavior.missing_payment_method=cancel` field on the subscription or set the subscription in the `subscription_data` field when creating a Checkout session, the subscription cancels if a payment method isn’t provided before the trial ends.

### Configure free trials without payment methods to pause

Use the Dashboard, the API, or Checkout to create free trials of a subscription without collecting payment details from your customers, and to configure your subscription to pause if the trial ends without a payment method.

You can use the Dashboard to sign customers up for a free trial of a subscription without collecting their payment details:

1. From the Subscriptions settings of the Dashboard, select **+Create subscription**.
1. After adding your customer and product information, select **+Add free trial**, then input how many days the free trial lasts.
1. Select the **Pause or cancel if free trial ends without a payment method** option, then select **Pause**. If you’re using [test clocks](https://docs.stripe.com/billing/testing/test-clocks.md), advance to the end of the trial. You won’t see an upcoming invoice for the subscription.
1. Listen to the `customer.subscription.paused` event that informs you when a subscription pauses at the end of trials without a payment method.

If you provide a payment method or select the **Email invoice to customer with link to payment page** option, the **Pause or cancel if free trial ends without a payment method** option won’t be visible.

Use the following API calls to sign up customers for a free trial of a subscription without collecting their payment details. If no payment method is provided at the end of the trial, the subscription pauses.

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new SubscriptionCreateOptions
{
    Customer = "<<customer>>",
    Items = new List<SubscriptionItemOptions>
    {
        new SubscriptionItemOptions { Price = "<<price>>" },
    },
    TrialPeriodDays = 30,
    PaymentSettings = new SubscriptionPaymentSettingsOptions
    {
        SaveDefaultPaymentMethod = "on_subscription",
    },
    TrialSettings = new SubscriptionTrialSettingsOptions
    {
        EndBehavior = new SubscriptionTrialSettingsEndBehaviorOptions
        {
            MissingPaymentMethod = "pause",
        },
    },
};
var service = new SubscriptionService();
Subscription subscription = service.Create(options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.SubscriptionParams{
  Customer: stripe.String("<<customer>>"),
  Items: []*stripe.SubscriptionItemsParams{
    &stripe.SubscriptionItemsParams{Price: stripe.String("<<price>>")},
  },
  TrialPeriodDays: stripe.Int64(30),
  PaymentSettings: &stripe.SubscriptionPaymentSettingsParams{
    SaveDefaultPaymentMethod: stripe.String(string(stripe.SubscriptionPaymentSettingsSaveDefaultPaymentMethodOnSubscription)),
  },
  TrialSettings: &stripe.SubscriptionTrialSettingsParams{
    EndBehavior: &stripe.SubscriptionTrialSettingsEndBehaviorParams{
      MissingPaymentMethod: stripe.String(string(stripe.SubscriptionTrialSettingsEndBehaviorMissingPaymentMethodPause)),
    },
  },
};
result, err := subscription.New(params);
```

```java
Stripe.apiKey = "<<secret key>>";

SubscriptionCreateParams params =
  SubscriptionCreateParams.builder()
    .setCustomer("<<customer>>")
    .addItem(SubscriptionCreateParams.Item.builder().setPrice("<<price>>").build())
    .setTrialPeriodDays(30L)
    .setPaymentSettings(
      SubscriptionCreateParams.PaymentSettings.builder()
        .setSaveDefaultPaymentMethod(
          SubscriptionCreateParams.PaymentSettings.SaveDefaultPaymentMethod.ON_SUBSCRIPTION
        )
        .build()
    )
    .setTrialSettings(
      SubscriptionCreateParams.TrialSettings.builder()
        .setEndBehavior(
          SubscriptionCreateParams.TrialSettings.EndBehavior.builder()
            .setMissingPaymentMethod(
              SubscriptionCreateParams.TrialSettings.EndBehavior.MissingPaymentMethod.PAUSE
            )
            .build()
        )
        .build()
    )
    .build();

Subscription subscription = Subscription.create(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const subscription = await stripe.subscriptions.create({
  customer: '<<customer>>',
  items: [\
    {\
      price: '<<price>>',\
    },\
  ],
  trial_period_days: 30,
  payment_settings: {
    save_default_payment_method: 'on_subscription',
  },
  trial_settings: {
    end_behavior: {
      missing_payment_method: 'pause',
    },
  },
});
```

```python
import stripe
stripe.api_key = "<<secret key>>"

subscription = stripe.Subscription.create(
  customer="<<customer>>",
  items=[{"price": "<<price>>"}],
  trial_period_days=30,
  payment_settings={"save_default_payment_method": "on_subscription"},
  trial_settings={"end_behavior": {"missing_payment_method": "pause"}},
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$subscription = $stripe->subscriptions->create([\
  'customer' => '<<customer>>',\
  'items' => [['price' => '<<price>>']],\
  'trial_period_days' => 30,\
  'payment_settings' => ['save_default_payment_method' => 'on_subscription'],\
  'trial_settings' => ['end_behavior' => ['missing_payment_method' => 'pause']],\
]);
```

```ruby
Stripe.api_key = '<<secret key>>'

subscription = Stripe::Subscription.create({
  customer: '<<customer>>',
  items: [{price: '<<price>>'}],
  trial_period_days: 30,
  payment_settings: {save_default_payment_method: 'on_subscription'},
  trial_settings: {end_behavior: {missing_payment_method: 'pause'}},
})
```

To update existing subscriptions, use the following API call:

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new SubscriptionUpdateOptions
{
    TrialSettings = new SubscriptionTrialSettingsOptions
    {
        EndBehavior = new SubscriptionTrialSettingsEndBehaviorOptions
        {
            MissingPaymentMethod = "pause",
        },
    },
};
var service = new SubscriptionService();
Subscription subscription = service.Update("<<subscription>>", options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.SubscriptionParams{
  TrialSettings: &stripe.SubscriptionTrialSettingsParams{
    EndBehavior: &stripe.SubscriptionTrialSettingsEndBehaviorParams{
      MissingPaymentMethod: stripe.String(string(stripe.SubscriptionTrialSettingsEndBehaviorMissingPaymentMethodPause)),
    },
  },
};
result, err := subscription.Update("<<subscription>>", params);
```

```java
Stripe.apiKey = "<<secret key>>";

Subscription resource = Subscription.retrieve("<<subscription>>");

SubscriptionUpdateParams params =
  SubscriptionUpdateParams.builder()
    .setTrialSettings(
      SubscriptionUpdateParams.TrialSettings.builder()
        .setEndBehavior(
          SubscriptionUpdateParams.TrialSettings.EndBehavior.builder()
            .setMissingPaymentMethod(
              SubscriptionUpdateParams.TrialSettings.EndBehavior.MissingPaymentMethod.PAUSE
            )
            .build()
        )
        .build()
    )
    .build();

Subscription subscription = resource.update(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const subscription = await stripe.subscriptions.update(
  '<<subscription>>',
  {
    trial_settings: {
      end_behavior: {
        missing_payment_method: 'pause',
      },
    },
  }
);
```

```python
import stripe
stripe.api_key = "<<secret key>>"

subscription = stripe.Subscription.modify(
  "<<subscription>>",
  trial_settings={"end_behavior": {"missing_payment_method": "pause"}},
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$subscription = $stripe->subscriptions->update(
  '<<subscription>>',
  ['trial_settings' => ['end_behavior' => ['missing_payment_method' => 'pause']]]
);
```

```ruby
Stripe.api_key = '<<secret key>>'

subscription = Stripe::Subscription.update(
  '<<subscription>>',
  {trial_settings: {end_behavior: {missing_payment_method: 'pause'}}},
)
```

You can use Stripe Checkout to sign customers up for a free trial of a subscription without collecting their payment details.

Create a Checkout Session with the following:

* A `subscription_data` dictionary with:
  * The `trial_period_days` field set to the length (in days) of your free trial. In this example, the trial period is 30 days.
  * The `trial_settings[end_behavior]` parameter set to `pause` to make sure that the subscription pauses if the free trial ends without a payment method attached.
* The `payment_method_collection` field with a value of `if_required`. This tells Stripe that collecting payment information at checkout is optional.

```dotnet
StripeConfiguration.ApiKey = "<<secret key>>";

var options = new Stripe.Checkout.SessionCreateOptions
{
    Mode = "subscription",
    LineItems = new List<Stripe.Checkout.SessionLineItemOptions>
    {
        new Stripe.Checkout.SessionLineItemOptions { Price = "price_abc", Quantity = 1 },
    },
    SubscriptionData = new Stripe.Checkout.SessionSubscriptionDataOptions
    {
        TrialSettings = new Stripe.Checkout.SessionSubscriptionDataTrialSettingsOptions
        {
            EndBehavior = new Stripe.Checkout.SessionSubscriptionDataTrialSettingsEndBehaviorOptions
            {
                MissingPaymentMethod = "pause",
            },
        },
        TrialPeriodDays = 30,
    },
    PaymentMethodCollection = "if_required",
    SuccessUrl = "https://example.com/success",
    CancelUrl = "https://example.com/cancel",
};
var service = new Stripe.Checkout.SessionService();
Stripe.Checkout.Session session = service.Create(options);
```

```go
stripe.Key = "<<secret key>>"

params := &stripe.CheckoutSessionParams{
  Mode: stripe.String(string(stripe.CheckoutSessionModeSubscription)),
  LineItems: []*stripe.CheckoutSessionLineItemParams{
    &stripe.CheckoutSessionLineItemParams{
      Price: stripe.String("price_abc"),
      Quantity: stripe.Int64(1),
    },
  },
  SubscriptionData: &stripe.CheckoutSessionSubscriptionDataParams{
    TrialSettings: &stripe.CheckoutSessionSubscriptionDataTrialSettingsParams{
      EndBehavior: &stripe.CheckoutSessionSubscriptionDataTrialSettingsEndBehaviorParams{
        MissingPaymentMethod: stripe.String("pause"),
      },
    },
    TrialPeriodDays: stripe.Int64(30),
  },
  PaymentMethodCollection: stripe.String(string(stripe.CheckoutSessionPaymentMethodCollectionIfRequired)),
  SuccessURL: stripe.String("https://example.com/success"),
  CancelURL: stripe.String("https://example.com/cancel"),
};
result, err := session.New(params);
```

```java
Stripe.apiKey = "<<secret key>>";

SessionCreateParams params =
  SessionCreateParams.builder()
    .setMode(SessionCreateParams.Mode.SUBSCRIPTION)
    .addLineItem(
      SessionCreateParams.LineItem.builder().setPrice("price_abc").setQuantity(1L).build()
    )
    .setSubscriptionData(
      SessionCreateParams.SubscriptionData.builder()
        .setTrialSettings(
          SessionCreateParams.SubscriptionData.TrialSettings.builder()
            .setEndBehavior(
              SessionCreateParams.SubscriptionData.TrialSettings.EndBehavior.builder()
                .setMissingPaymentMethod(
                  SessionCreateParams.SubscriptionData.TrialSettings.EndBehavior.MissingPaymentMethod.PAUSE
                )
                .build()
            )
            .build()
        )
        .setTrialPeriodDays(30L)
        .build()
    )
    .setPaymentMethodCollection(SessionCreateParams.PaymentMethodCollection.IF_REQUIRED)
    .setSuccessUrl("https://example.com/success")
    .setCancelUrl("https://example.com/cancel")
    .build();

Session session = Session.create(params);
```

```node
const stripe = require('stripe')('<<secret key>>');

const session = await stripe.checkout.sessions.create({
  mode: 'subscription',
  line_items: [\
    {\
      price: 'price_abc',\
      quantity: 1,\
    },\
  ],
  subscription_data: {
    trial_settings: {
      end_behavior: {
        missing_payment_method: 'pause',
      },
    },
    trial_period_days: 30,
  },
  payment_method_collection: 'if_required',
  success_url: 'https://example.com/success',
  cancel_url: 'https://example.com/cancel',
});
```

```python
import stripe
stripe.api_key = "<<secret key>>"

session = stripe.checkout.Session.create(
  mode="subscription",
  line_items=[{"price": "price_abc", "quantity": 1}],
  subscription_data={
    "trial_settings": {"end_behavior": {"missing_payment_method": "pause"}},
    "trial_period_days": 30,
  },
  payment_method_collection="if_required",
  success_url="https://example.com/success",
  cancel_url="https://example.com/cancel",
)
```

```php
$stripe = new \Stripe\StripeClient('<<secret key>>');

$session = $stripe->checkout->sessions->create([\
  'mode' => 'subscription',\
  'line_items' => [\
    [\
      'price' => 'price_abc',\
      'quantity' => 1,\
    ],\
  ],\
  'subscription_data' => [\
    'trial_settings' => ['end_behavior' => ['missing_payment_method' => 'pause']],\
    'trial_period_days' => 30,\
  ],\
  'payment_method_collection' => 'if_required',\
  'success_url' => 'https://example.com/success',\
  'cancel_url' => 'https://example.com/cancel',\
]);
```

```ruby
Stripe.api_key = '<<secret key>>'

session = Stripe::Checkout::Session.create({
  mode: 'subscription',
  line_items: [\
    {\
      price: 'price_abc',\
      quantity: 1,\
    },\
  ],
  subscription_data: {
    trial_settings: {end_behavior: {missing_payment_method: 'pause'}},
    trial_period_days: 30,
  },
  payment_method_collection: 'if_required',
  success_url: 'https://example.com/success',
  cancel_url: 'https://example.com/cancel',
})
```

If you set the `trial_settings.end_behavior.missing_payment_method=pause` field on the subscription or set the subscription in the `subscription_data` field when creating a Checkout session, the subscription pauses if you don’t add a payment method before the trial ends.

### Collect payment details from your customer before their trial ends

Configure your subscription to automatically send a reminder email when the customer’s trial is about to expire. You must comply with the card network requirements when offering trials. Learn more about [compliance requirements for trials and promotions](#compliance).

### Events

[Events](https://docs.stripe.com/api.md#event_types) are triggered every time a free trial changes. Make sure that your integration properly handles the events. For example, you might want to email a customer before a free trial ends. Learn more about [handling subscription events](https://docs.stripe.com/billing/subscriptions/webhooks.md#events).

The following table describes the events that trigger before a free trial ends, when a trial subscription pauses or cancels, and when a subscription is resumed and becomes active.

| Event                                  | Description                                                                                                                                                                                                                                    | Use case                                                                                                                                                                                                                                                                                                                            |
| -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `customer.subscription.deleted`        | Sent when a subscription ends.                                                                                                                                                                                                                 | Stop providing access to your product in response to this event. The subscription moves to the `canceled` status and sends this event after a free trial ends without a payment method and if the subscription’s `missing_payment_method` end behavior is set to `cancel`.                                                          |
| `customer.subscription.resumed`        | Sent when a subscription is no longer paused. When you receive this event, grant the customer access to the product if access was revoked while the subscription was paused.                                                                   | Paused subscriptions are converted into active subscriptions after being resumed. Resuming a subscription might generate an invoice and corresponding Payment Intent that must be paid before the subscription moves out of the `paused` status.                                                                                    |
| `customer.subscription.paused`         | Sent when a subscription is fully paused. Invoicing won’t occur until the subscription resumes. When you receive this event, you can revoke the customer’s access to the product until they add a payment method and the subscription resumes. | Stop providing access to your product in response to this event. The subscription moves to the `paused` status and sends this event after a free trial ends without a payment method and if the subscription’s `missing_payment_method` end behavior is set to `pause`. The subscription remains `paused` until explicitly resumed. |
| `customer.subscription.trial_will_end` | Sent three days before the trial period ends. If the trial is less than 3 days, this event is triggered.                                                                                                                                       | Configure the subscription to automatically send an email to your customer 3 days before the trial period ends.                                                                                                                                                                                                                     |

### Use the customer portal to collect payment

After you create a subscription for a customer without collecting a payment method, you can redirect them to the Billing customer portal to add their payment details.

First, configure the [Billing customer portal](https://docs.stripe.com/customer-management.md) to enable your customers to manage their subscriptions.

Next, collect billing information from your customers:

1. Listen to the [`customer.subscription.trial_will_end` event](https://docs.stripe.com/api/events/types.md#event_types-customer.subscription.trial_will_end).
1. If the subscription doesn’t have a [default payment method](https://docs.stripe.com/api/subscriptions/object.md#subscription_object-default_payment_method), get the customer’s email using the [Customers API](https://docs.stripe.com/api/customers/retrieve.md) and send them a message with a link to your site. It’s helpful to embed the customer ID in the email. For example: `https://example.com?...&customer={{CUSTOMER_ID}}`.
1. When the customer enters your site, create a customer portal session using the customer ID from the previous step.
1. Redirect the customer to the customer portal, where they can update their subscription with payment details.

### Allow customers to reactivate their subscriptions in the customer portal

To enable the subscription of a customer whose trial ended in a `paused` subscription through the customer portal, enable the free trial without payment method feature when creating a new subscription in the Dashboard.

### Send an email reminder before the trial ends

Use the `customer.subscription.trial_will_end` event to send your own hosted emails to customers. After you see the event in the Dashboard, it’s confirmed that your email has been sent.

### Convert a trial if customers provide payment information before the trial ends

Subscriptions and upcoming invoices are created at the start of the trial and become active at the end of the trial if the customer provides a payment method.

### Configure pausing when a payment method isn’t provided

After a free trial ends, you can configure subscriptions to pause if no default payment method is available for a subscription on a per-subscription basis.

You can update subscriptions while they’re paused. Updates that typically generate prorations (adding items, changing price or plan, changing quantity, and so on) won’t generate proration line items because the customer isn’t being charged while the subscription is paused. If you want to extend a trial after a subscription transitions into a `paused` status, you must resume the subscription before configuring a trial.

We check `default_source` and `default_payment_method` on the subscription and customer to determine whether a subscription is missing a payment method at the end of a trial.

### Resume a paused subscription

Use the Dashboard, API, customer portal, or Hosted Invoice Page to resume a paused subscription.

To resume a paused subscription in the Dashboard, navigate to the subscription, then select **Resume Subscription** under the **Actions** menu. Select **Reset billing cycle** or **Always invoice** (if you’re not resetting the billing cycle) from the **Resume subscription** modal to charge the customer immediately.

When a paused subscription resumes, resumption of the subscription begins immediately. The `resume` endpoint enables you to resume a subscription and optionally change the `billing_cycle_anchor` date or create prorations.

For a `billing_cycle_anchor` value of `unchanged`, we create a debit proration for the partial period between `proration_date` (the default is `now`) and the end of the current billing period (unless `proration_behavior=none`). This also creates an invoice for the current period if `proration_behavior=always_invoice`.

Use the `resume` endpoint to resume a paused subscription. A payment method doesn’t need to be supplied on the subscription before you can resume (for example, if you want to generate or view the invoice prior to a customer providing payment), but the invoice needs to be paid before the subscription is reactivated. The invoice becomes automatically void after 23 hours if the associated payment intent doesn’t have a payment method attached and isn’t confirmed.

When you reactivate a subscription, the `items.current_period_start` and `items.current_period_end` timestamps advance to surround the current time. If `billing_cycle_anchor=now`, then `items.current_period_start == now`, which starts a new cycle, similar to converting after the trial ends.

Use the [customer portal to collect payment](#use-the-customer-portal-to-collect-payment), then [redirect](https://docs.stripe.com/customer-management/integrate-customer-portal.md#redirect) the customer to the customer portal. The customer can select **Start subscription**, then add a payment method to resume their subscription.

To resume a paused subscription in the [Hosted Invoice Page](https://docs.stripe.com/invoicing/hosted-invoice-page.md), provide a payment method, then select **Authorize and pay**.

### Invoicing a subscription

While paused, a subscription won’t create an invoice. If you want to continue creating invoices, use `pause_collection` to stop collecting payments while continuing to invoice and advance billing periods.

To preview the invoice that’s generated when a paused subscription is resumed, specify [subscription_details.resume_at](https://docs.stripe.com/api/invoices/create_preview.md#create_create_preview-subscription_details-resume_at).

## See Also

- [Products and prices](https://docs.stripe.com/products-prices/overview.md)
- [Prices](https://docs.stripe.com/api.md#prices)
- [Subscriptions](https://docs.stripe.com/api.md#subscriptions)
- [Managing subscription billing cycles](https://docs.stripe.com/billing/subscriptions/billing-cycle.md)

````